# Standalone dev UI â€” connects to ARM and Transcoder on the host network.
# Requires an ARM database volume from the ARM-neu compose project.
#
# Set ARM_NEU_PATH in .env if the ARM-neu repo is not at the default location:
#   ARM_NEU_PATH=../automatic-ripping-machine-neu

services:
  arm-ui:
    build: .
    network_mode: host
    environment:
      - ARM_UI_ARM_DB_PATH=/data/db/arm.db
      - ARM_UI_ARM_LOG_PATH=/data/logs
      - ARM_UI_ARM_CONFIG_PATH=/data/config/arm.yaml
      - ARM_UI_ARM_URL=http://localhost:8080
      - ARM_UI_TRANSCODER_URL=http://localhost:5000
      - ARM_UI_ARM_HB_PRESETS_PATH=/data/hb-presets/presets.json
      - ARM_UI_TRANSCODER_API_KEY=
    volumes:
      - arm-db:/data/db:ro
      - ${ARM_NEU_PATH:-../automatic-ripping-machine-neu}/dev-data/logs:/data/logs:ro
      - ${ARM_NEU_PATH:-../automatic-ripping-machine-neu}/dev-data/config:/data/config:rw
    restart: unless-stopped

volumes:
  arm-db:
    # Created by the ARM-neu compose project. Name depends on the directory name.
    # Default assumes ARM-neu repo is in a sibling directory named automatic-ripping-machine-neu.
    name: automatic-ripping-machine-neu_arm-db
    external: true
